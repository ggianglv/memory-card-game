(this["webpackJsonpmemory-card-game"]=this["webpackJsonpmemory-card-game"]||[]).push([[0],[,,,function(e,t,c){"use strict";c.d(t,"a",(function(){return n})),c.d(t,"f",(function(){return a})),c.d(t,"c",(function(){return r})),c.d(t,"b",(function(){return o})),c.d(t,"e",(function(){return i})),c.d(t,"g",(function(){return s})),c.d(t,"d",(function(){return u}));var n="SET_MODE",a="UPDATE_TIME",r="UPDATE_MOVE",o="SET_INIT_DATA",i="UPDATE_START",s="UPDATE_TOPIC",u="UPDATE_REMOVED"},function(e,t,c){"use strict";c.d(t,"b",(function(){return i})),c.d(t,"c",(function(){return s})),c.d(t,"a",(function(){return u})),c.d(t,"d",(function(){return l}));var n=c(7),a=c(11),r=c(1),o=function(e){return 0===e?0:Math.floor(Math.random()*e+1)},i=function(e){for(var t=e.mode,c=e.topic,r=Object(a.a)(Array(t)).map((function(e,t){return t+1})),i=Object(a.a)(Array(12)).map((function(e,t){return t+1})),s=Object(a.a)(r),u={};s.length;){var l=s.splice(o(s.length-1),1),d=Object(n.a)(l,1)[0],j=s.splice(o(s.length-1),1),b=Object(n.a)(j,1)[0],m=i.shift(),O="/images/".concat(c,"/").concat(m,".png");u[d]=O,u[b]=O}return{cards:r,cardData:u,start:!1,removed:{},move:0,time:0}},s=function(e){var t=Object(r.useRef)(e);return Object(r.useEffect)((function(){t.current=e}),[e]),t.current},u=function(e){var t=~~(e/3600),c=~~(e%3600/60),n=~~e%60,a="";return t>0&&(a+=t+":"+(c<10?"0":"")),a+=c+":"+(n<10?"0":""),a+=""+n},l=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}},function(e,t,c){"use strict";c.d(t,"a",(function(){return n})),c.d(t,"b",(function(){return a}));var n={EASY:16,MEDIUM:20,HARD:24},a={PEPE:"pepe",RICK:"rick-and-morty"}},,,function(e,t,c){"use strict";c.d(t,"a",(function(){return a}));var n=c(1),a=c.n(n).a.createContext({})},,,,,,,,,,,,function(e,t,c){},,function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(14),o=c.n(r),i=(c(20),c(7)),s=c(13),u=c.n(s),l=c(2),d=c(15),j=c(6),b=(c(22),c(23),c(0)),m=function(e){var t=e.image,c=e.cardIndex,n=e.setActive,a=e.active,r=e.removed,o={backgroundImage:"url(".concat(t,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"#dddddd"},i="flip-card";(a||r)&&(i+=" flip-card-active");return Object(b.jsx)("div",{onClick:function(){r||n(c)},className:i,children:Object(b.jsxs)("div",{className:"flip-card-inner",children:[Object(b.jsx)("div",{className:"flip-card-front"}),Object(b.jsx)("div",{"data-testid":"image",style:o,className:"flip-card-back"})]})})},O=c(8),f=c(5),v=c(4),x="http://localhost:4000",p=function(e,t){var c=localStorage.getItem("userId"),n="POST",a="".concat(x,"/users");return t&&(n="PUT",a="".concat(x,"/users/").concat(t)),fetch(a,{method:n,headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(Object(l.a)(Object(l.a)({},e),{},{id:c}))})},h=c(3),y=function(){var e,t=Object(n.useState)({}),c=Object(i.a)(t,2),a=c[0],r=c[1],o=Object(n.useContext)(O.a),s=o.state,x=o.dispatch,y=Object(v.c)(s.start),g=s.start,N=s.cards,E=s.cardData,I=Object(n.useRef)(null),C=Object(n.useRef)(null);Object(n.useEffect)((function(){!1===y&&!0===s.start&&(C.current=setInterval((function(){x({type:h.f})}),1e3)),!0===y&&!1===s.start&&(clearInterval(C.current),r({}))}),[s.start,y,x]),Object(n.useEffect)((function(){return function(){clearTimeout(I.current)}}),[]);var T={maxHeight:(e={},Object(j.a)(e,f.a.EASY,400),Object(j.a)(e,f.a.MEDIUM,500),Object(j.a)(e,f.a.HARD,600),e)[s.mode],backgroundImage:"url(/images/".concat(s.topic,".png)")},k=function(){var e=Object(d.a)(u.a.mark((function e(t){var c,n,o,i,d,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g||x({type:h.e,payload:!0}),0===Object.keys(a).length&&x({type:h.c,payload:s.move+1}),2!==Object.keys(a).length){e.next=4;break}return e.abrupt("return");case 4:c=Object(l.a)(Object(l.a)({},a),{},Object(j.a)({},t,!0)),r(c),n=Object.keys(c),o=2===n.length,i=E[n[0]]===E[n[1]],o&&!i&&(I.current=setTimeout((function(){r({})}),1e3)),o&&i&&(I.current=setTimeout((function(){r({})}),1e3),b=Object(l.a)(Object(l.a)({},s.removed),{},(d={},Object(j.a)(d,n[0],!0),Object(j.a)(d,n[1],!0),d)),p(Object(l.a)(Object(l.a)({},s),{},{removed:b}),s.id),x({type:h.b,payload:{removed:b,id:localStorage.getItem("userId")}}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{style:T,className:"board",children:N.map((function(e){return Object(b.jsx)(m,{removed:s.removed[e],active:a[e],image:E[e],selected:a,cardIndex:e,setActive:k},e)}))})},g=(c(25),c(26),function(e){var t=e.openModal,a=Object(n.useContext)(O.a).state;return Object(b.jsxs)("div",{className:"menu",children:[Object(b.jsx)("div",{className:"item",children:Object(b.jsxs)("div",{className:"item-wrap",children:[Object(b.jsx)("div",{className:"label",children:"Move: "}),Object(b.jsx)("div",{className:"value",children:a.move})]})}),Object(b.jsx)("div",{className:"item",children:Object(b.jsxs)("div",{className:"item-wrap",children:[Object(b.jsx)("div",{className:"label",children:"Time: "}),Object(b.jsx)("div",{className:"value",children:Object(v.a)(a.time)})]})}),Object(b.jsx)("div",{className:"item",children:Object(b.jsx)("button",{onClick:function(){t({title:"Choose topic",component:Object(n.lazy)((function(){return c.e(5).then(c.bind(null,31))}))})},className:"custom-button",children:"Topic"})}),Object(b.jsx)("div",{className:"item",children:Object(b.jsx)("button",{onClick:function(){t({title:"History",component:Object(n.lazy)((function(){return c.e(3).then(c.bind(null,29))}))})},className:"custom-button",children:"History"})}),Object(b.jsx)("div",{className:"item",children:Object(b.jsx)("button",{onClick:function(){t({title:"New Game",component:Object(n.lazy)((function(){return c.e(4).then(c.bind(null,30))}))})},className:"custom-button",children:"New game"})})]})}),N=function(){return Object(b.jsx)("h3",{className:"title",children:"Memory Card game"})},E=(c(27),function(e){var t=e.onClickClose,c=e.children,n=e.title;return Object(b.jsx)("div",{className:"modal show",children:Object(b.jsxs)("div",{className:"modal-content",children:[Object(b.jsx)("div",{"data-testid":"title",className:"modal-title",children:n}),Object(b.jsx)("div",{"data-testid":"children",className:"content-body",children:c}),Object(b.jsx)("div",{className:"content-footer",children:Object(b.jsx)("div",{onClick:t,className:"close-button",children:"Close"})})]})})}),I=Object(v.b)({topic:f.b.RICK,mode:f.a.EASY}),C=Object(l.a)({move:0,removed:{},time:0,start:!1,topic:f.b.RICK,mode:f.a.EASY,isLoading:!1,complete:!1,history:[]},I),T=function(e,t){switch(t.type){case h.a:var c=Object(v.b)({topic:e.topic,mode:t.payload});return Object(l.a)(Object(l.a)(Object(l.a)({},e),c),{},{mode:t.payload});case h.b:return Object(l.a)(Object(l.a)({},e),t.payload);case h.e:return Object(l.a)(Object(l.a)({},e),{},{start:t.payload});case h.c:return Object(l.a)(Object(l.a)({},e),{},{move:t.payload});case h.f:return Object(l.a)(Object(l.a)({},e),{},{time:e.time+1});case h.d:return Object(l.a)(Object(l.a)({},e),{},{removed:t.payload});case h.g:var n=Object(v.b)({topic:t.payload,mode:e.mode});return Object(l.a)(Object(l.a)(Object(l.a)({},e),n),{},{topic:t.payload,start:!1,time:0,move:0});default:return e}},k=localStorage.getItem("userId");k||(k=Object(v.d)(),localStorage.setItem("userId",k));var S=function(){var e=Object(n.useReducer)(T,C),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(null),o=Object(i.a)(r,2),s=o[0],u=o[1],l=Object(n.useState)(""),d=Object(i.a)(l,2),j=d[0],m=d[1];Object(n.useEffect)((function(){var e;(e=k,fetch("".concat(x,"/users/").concat(e)).then((function(e){return e.json()}))).then((function(e){if(e.complete)return a({type:h.b,payload:{id:e.id,history:e.history}});a({type:h.b,payload:e})})).catch((function(e){console.log(e)}))}),[a]);var f=function(e){var t=e.title,c=e.component;m(t),u(c)},v=Object(n.useMemo)((function(){return{state:c,dispatch:a}}),[a,c]);return Object(b.jsx)(O.a.Provider,{value:v,children:Object(b.jsx)("div",{className:"app",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(N,{}),Object(b.jsx)(y,{openModal:f}),Object(b.jsx)(g,{openModal:f}),s&&Object(b.jsx)(E,{title:j,onClickClose:function(){u(null)},children:Object(b.jsx)(n.Suspense,{fallback:null,children:Object(b.jsx)(s,{closeModal:function(){m(""),u(null)}})})})]})})})},M=function(e){e&&e instanceof Function&&c.e(6).then(c.bind(null,32)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;c(e),n(e),a(e),r(e),o(e)}))};o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(S,{})}),document.getElementById("root")),M()}],[[28,1,2]]]);
//# sourceMappingURL=main.31ac4076.chunk.js.map